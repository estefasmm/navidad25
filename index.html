<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="Tarjeta navideña interactiva 2026 con efectos tecnológicos y árbol de circuitos">
    <meta name="keywords" content="navidad, tarjeta, 2026, tecnológico, interactivo, felicitación">
    <meta name="author" content="Estefanía San Miguel Mas">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Tarjeta Navideña 2026 - Feliz Navidad">
    <meta property="og:description" content="Una experiencia navideña interactiva con efectos tecnológicos únicos">
    <meta property="og:image" content="./preview.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Tarjeta Navideña 2026">
    <meta property="twitter:description" content="Felicitación navideña interactiva con árbol tecnológico">
    
    <title>Tarjeta Navideña 2026</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
</head>
<body>
    <!-- Efectos de nieve realista -->
    <div class="snow snow-large"></div>
    <div class="snow snow-medium"></div>
    <div class="snow snow-small"></div>
    <div class="snow snow-tiny"></div>
    
    <!-- Botón de apertura -->
    <div class="open-button-container" id="openButton">
        <button class="open-button" aria-label="Abrir tarjeta navideña interactiva" role="button" tabindex="0">
            <div class="button-glow"></div>
            <div class="button-content">
                <div class="button-icon" aria-hidden="true">✉️</div>
                <div class="button-text">Abrir Tarjeta Navideña</div>
                <div class="button-subtext">Haz clic para revelar tu sorpresa</div>
            </div>
            <div class="button-particles" aria-hidden="true"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
            </div>
        </button>
    </div>

    <!-- Contenedor de la carta -->
    <div class="card-envelope" id="cardEnvelope">
        <!-- Parte trasera de la carta -->
        <div class="card-back">
            <div class="envelope-pattern"></div>
            <div class="envelope-seal">
                <div class="seal-content">2026</div>
            </div>
        </div>
        
        <!-- Parte frontal de la carta -->
        <div class="card-front">
            <div class="card-content">
                <!-- Árbol que se dibuja progresivamente -->
                <div class="tree-container">
                    <!-- Árbol de navidad con circuitos internos como en la imagen -->
                    <svg class="tree-svg matrix-christmas-tree" viewBox="0 0 200 250" xmlns="http://www.w3.org/2000/svg">
                        <!-- Definiciones para efectos -->
                        <defs>
                            <filter id="circuit-glow">
                                <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        <!-- Tronco del árbol -->
                        <g class="tree-trunk">
                            <rect x="95" y="220" width="10" height="30" rx="2" class="trunk-shape"/>
                            <!-- Líneas verticales en el tronco -->
                            <line x1="97" y1="220" x2="97" y2="250" class="trunk-circuit"/>
                            <line x1="100" y1="220" x2="100" y2="250" class="trunk-circuit"/>
                            <line x1="103" y1="220" x2="103" y2="250" class="trunk-circuit"/>
                        </g>
                        
                        <!-- Capa 1 - Base más grande -->
                        <g class="tree-section section-1">
                            <!-- Líneas del contorno del triángulo -->
                            <line x1="20" y1="220" x2="100" y2="180" class="outline-line"/>
                            <line x1="100" y1="180" x2="180" y2="220" class="outline-line"/>
                            <line x1="180" y1="220" x2="20" y2="220" class="outline-line"/>
                            
                            <!-- Nodos en las esquinas del triángulo -->
                            <circle cx="20" cy="220" r="3" class="corner-node"/>
                            <circle cx="100" cy="180" r="3" class="corner-node"/>
                            <circle cx="180" cy="220" r="3" class="corner-node"/>
                            
                            <!-- Circuitos horizontales dentro del triángulo -->
                            <line x1="30" y1="215" x2="170" y2="215" class="internal-circuit"/>
                            <line x1="35" y1="210" x2="165" y2="210" class="internal-circuit"/>
                            <line x1="40" y1="205" x2="160" y2="205" class="internal-circuit"/>
                            <line x1="45" y1="200" x2="155" y2="200" class="internal-circuit"/>
                            <line x1="50" y1="195" x2="150" y2="195" class="internal-circuit"/>
                            <line x1="55" y1="190" x2="145" y2="190" class="internal-circuit"/>
                            <line x1="65" y1="185" x2="135" y2="185" class="internal-circuit"/>
                            
                            <!-- Líneas verticales conectoras -->
                            <line x1="60" y1="185" x2="60" y2="215" class="vertical-circuit"/>
                            <line x1="80" y1="185" x2="80" y2="215" class="vertical-circuit"/>
                            <line x1="100" y1="180" x2="100" y2="220" class="main-vertical"/>
                            <line x1="120" y1="185" x2="120" y2="215" class="vertical-circuit"/>
                            <line x1="140" y1="185" x2="140" y2="215" class="vertical-circuit"/>
                            
                            <!-- Nodos de conexión -->
                            <circle cx="60" cy="200" r="2" class="connection-node"/>
                            <circle cx="80" cy="195" r="2" class="connection-node"/>
                            <circle cx="100" cy="190" r="3" class="main-node"/>
                            <circle cx="120" cy="195" r="2" class="connection-node"/>
                            <circle cx="140" cy="200" r="2" class="connection-node"/>
                        </g>
                        
                        <!-- Capa 2 -->
                        <g class="tree-section section-2">
                            <!-- Líneas del contorno -->
                            <line x1="30" y1="180" x2="100" y2="145" class="outline-line"/>
                            <line x1="100" y1="145" x2="170" y2="180" class="outline-line"/>
                            <line x1="170" y1="180" x2="30" y2="180" class="outline-line"/>
                            
                            <!-- Nodos en esquinas -->
                            <circle cx="30" cy="180" r="3" class="corner-node"/>
                            <circle cx="100" cy="145" r="3" class="corner-node"/>
                            <circle cx="170" cy="180" r="3" class="corner-node"/>
                            
                            <line x1="40" y1="175" x2="160" y2="175" class="internal-circuit"/>
                            <line x1="45" y1="170" x2="155" y2="170" class="internal-circuit"/>
                            <line x1="50" y1="165" x2="150" y2="165" class="internal-circuit"/>
                            <line x1="55" y1="160" x2="145" y2="160" class="internal-circuit"/>
                            <line x1="60" y1="155" x2="140" y2="155" class="internal-circuit"/>
                            <line x1="70" y1="150" x2="130" y2="150" class="internal-circuit"/>
                            
                            <line x1="65" y1="150" x2="65" y2="175" class="vertical-circuit"/>
                            <line x1="85" y1="150" x2="85" y2="175" class="vertical-circuit"/>
                            <line x1="100" y1="145" x2="100" y2="180" class="main-vertical"/>
                            <line x1="115" y1="150" x2="115" y2="175" class="vertical-circuit"/>
                            <line x1="135" y1="150" x2="135" y2="175" class="vertical-circuit"/>
                            
                            <circle cx="65" cy="162" r="2" class="connection-node"/>
                            <circle cx="85" cy="158" r="2" class="connection-node"/>
                            <circle cx="100" cy="155" r="3" class="main-node"/>
                            <circle cx="115" cy="158" r="2" class="connection-node"/>
                            <circle cx="135" cy="162" r="2" class="connection-node"/>
                        </g>
                        
                        <!-- Capa 3 -->
                        <g class="tree-section section-3">
                            <!-- Líneas del contorno -->
                            <line x1="40" y1="145" x2="100" y2="115" class="outline-line"/>
                            <line x1="100" y1="115" x2="160" y2="145" class="outline-line"/>
                            <line x1="160" y1="145" x2="40" y2="145" class="outline-line"/>
                            
                            <!-- Nodos en esquinas -->
                            <circle cx="40" cy="145" r="3" class="corner-node"/>
                            <circle cx="100" cy="115" r="3" class="corner-node"/>
                            <circle cx="160" cy="145" r="3" class="corner-node"/>
                            
                            <line x1="50" y1="140" x2="150" y2="140" class="internal-circuit"/>
                            <line x1="55" y1="135" x2="145" y2="135" class="internal-circuit"/>
                            <line x1="60" y1="130" x2="140" y2="130" class="internal-circuit"/>
                            <line x1="65" y1="125" x2="135" y2="125" class="internal-circuit"/>
                            <line x1="75" y1="120" x2="125" y2="120" class="internal-circuit"/>
                            
                            <line x1="70" y1="120" x2="70" y2="140" class="vertical-circuit"/>
                            <line x1="90" y1="120" x2="90" y2="140" class="vertical-circuit"/>
                            <line x1="100" y1="115" x2="100" y2="145" class="main-vertical"/>
                            <line x1="110" y1="120" x2="110" y2="140" class="vertical-circuit"/>
                            <line x1="130" y1="120" x2="130" y2="140" class="vertical-circuit"/>
                            
                            <circle cx="70" cy="130" r="2" class="connection-node"/>
                            <circle cx="90" cy="125" r="2" class="connection-node"/>
                            <circle cx="100" cy="122" r="3" class="main-node"/>
                            <circle cx="110" cy="125" r="2" class="connection-node"/>
                            <circle cx="130" cy="130" r="2" class="connection-node"/>
                        </g>
                        
                        <!-- Capa 4 -->
                        <g class="tree-section section-4">
                            <!-- Líneas del contorno -->
                            <line x1="50" y1="115" x2="100" y2="90" class="outline-line"/>
                            <line x1="100" y1="90" x2="150" y2="115" class="outline-line"/>
                            <line x1="150" y1="115" x2="50" y2="115" class="outline-line"/>
                            
                            <!-- Nodos en esquinas -->
                            <circle cx="50" cy="115" r="3" class="corner-node"/>
                            <circle cx="100" cy="90" r="3" class="corner-node"/>
                            <circle cx="150" cy="115" r="3" class="corner-node"/>
                            
                            <line x1="60" y1="110" x2="140" y2="110" class="internal-circuit"/>
                            <line x1="65" y1="105" x2="135" y2="105" class="internal-circuit"/>
                            <line x1="70" y1="100" x2="130" y2="100" class="internal-circuit"/>
                            <line x1="80" y1="95" x2="120" y2="95" class="internal-circuit"/>
                            
                            <line x1="75" y1="95" x2="75" y2="110" class="vertical-circuit"/>
                            <line x1="95" y1="95" x2="95" y2="110" class="vertical-circuit"/>
                            <line x1="100" y1="90" x2="100" y2="115" class="main-vertical"/>
                            <line x1="105" y1="95" x2="105" y2="110" class="vertical-circuit"/>
                            <line x1="125" y1="95" x2="125" y2="110" class="vertical-circuit"/>
                            
                            <circle cx="75" cy="102" r="2" class="connection-node"/>
                            <circle cx="95" cy="98" r="2" class="connection-node"/>
                            <circle cx="100" cy="95" r="3" class="main-node"/>
                            <circle cx="105" cy="98" r="2" class="connection-node"/>
                            <circle cx="125" cy="102" r="2" class="connection-node"/>
                        </g>
                        
                        <!-- Capa 5 - Punta -->
                        <g class="tree-section section-5">
                            <!-- Líneas del contorno -->
                            <line x1="65" y1="90" x2="100" y2="65" class="outline-line"/>
                            <line x1="100" y1="65" x2="135" y2="90" class="outline-line"/>
                            <line x1="135" y1="90" x2="65" y2="90" class="outline-line"/>
                            
                            <!-- Nodos en esquinas -->
                            <circle cx="65" cy="90" r="3" class="corner-node"/>
                            <circle cx="100" cy="65" r="3" class="corner-node"/>
                            <circle cx="135" cy="90" r="3" class="corner-node"/>
                            
                            <line x1="75" y1="85" x2="125" y2="85" class="internal-circuit"/>
                            <line x1="80" y1="80" x2="120" y2="80" class="internal-circuit"/>
                            <line x1="85" y1="75" x2="115" y2="75" class="internal-circuit"/>
                            <line x1="90" y1="70" x2="110" y2="70" class="internal-circuit"/>
                            
                            <line x1="85" y1="70" x2="85" y2="85" class="vertical-circuit"/>
                            <line x1="100" y1="65" x2="100" y2="90" class="main-vertical"/>
                            <line x1="115" y1="70" x2="115" y2="85" class="vertical-circuit"/>
                            
                            <circle cx="85" cy="77" r="2" class="connection-node"/>
                            <circle cx="100" cy="72" r="3" class="main-node"/>
                            <circle cx="115" cy="77" r="2" class="connection-node"/>
                        </g>
                        
                        <!-- Estrella en la punta -->
                        <g class="christmas-star interactive-star">
                            <circle cx="100" cy="50" r="15" class="star-aura"/>
                            <circle cx="100" cy="50" r="10" class="star-glow"/>
                            <polygon points="100,40 103,47 110,47 105,52 107,59 100,55 93,59 95,52 90,47 97,47" class="star-shape"/>
                            <circle cx="100" cy="50" r="3" class="star-core"/>
                            
                            <!-- Rayos de la estrella -->
                            <line x1="100" y1="35" x2="100" y2="30" class="star-ray"/>
                            <line x1="115" y1="50" x2="120" y2="50" class="star-ray"/>
                            <line x1="85" y1="50" x2="80" y2="50" class="star-ray"/>
                            <line x1="100" y1="65" x2="100" y2="70" class="star-ray"/>
                            <line x1="110" y1="40" x2="113" y2="37" class="star-ray"/>
                            <line x1="90" y1="40" x2="87" y2="37" class="star-ray"/>
                            <line x1="110" y1="60" x2="113" y2="63" class="star-ray"/>
                            <line x1="90" y1="60" x2="87" y2="63" class="star-ray"/>
                        </g>
                        
                        <!-- Partículas flotantes alrededor -->
                        <g class="floating-particles">
                            <circle cx="25" cy="180" r="1" class="particle"/>
                            <circle cx="175" cy="160" r="1" class="particle"/>
                            <circle cx="20" cy="140" r="1" class="particle"/>
                            <circle cx="180" cy="120" r="1" class="particle"/>
                            <circle cx="30" cy="100" r="1" class="particle"/>
                            <circle cx="170" cy="80" r="1" class="particle"/>
                        </g>
                    </svg>
                    
                    <!-- Luces en los nodos -->
                    <div class="circuit-lights">
                        <!-- Luces en nodos de conexión -->
                        <div class="circuit-light light-cyan" style="top: 80%; left: 30%;"></div>
                        <div class="circuit-light light-blue" style="top: 80%; left: 70%;"></div>
                        <div class="circuit-light light-cyan" style="top: 65%; left: 32%;"></div>
                        <div class="circuit-light light-blue" style="top: 65%; left: 68%;"></div>
                        <div class="circuit-light light-cyan" style="top: 52%; left: 35%;"></div>
                        <div class="circuit-light light-blue" style="top: 52%; left: 65%;"></div>
                        <div class="circuit-light light-cyan" style="top: 41%; left: 38%;"></div>
                        <div class="circuit-light light-blue" style="top: 41%; left: 62%;"></div>
                        <div class="circuit-light light-cyan" style="top: 31%; left: 42%;"></div>
                        <div class="circuit-light light-blue" style="top: 31%; left: 58%;"></div>
                        
                        <!-- Luces principales en el centro -->
                        <div class="circuit-light light-main" style="top: 76%; left: 50%;"></div>
                        <div class="circuit-light light-main" style="top: 62%; left: 50%;"></div>
                        <div class="circuit-light light-main" style="top: 49%; left: 50%;"></div>
                        <div class="circuit-light light-main" style="top: 38%; left: 50%;"></div>
                        <div class="circuit-light light-main" style="top: 29%; left: 50%;"></div>
                    </div>
                </div>
                
                <!-- Contenido de texto -->
                <div class="text-content">
                    <!-- Saludo navideño -->
                    <div class="christmas-greeting">
                        <div class="feliz-navidad">Feliz Navidad</div>
                        <div class="y-feliz">y feliz</div>
                    </div>
                    
                    <!-- Año con animación -->
                    <div class="year">
                        <span class="digit">2</span>
                        <span class="digit">0</span>
                        <span class="digit">2</span>
                        <span class="digit-container">
                            <span class="digit five">5</span>
                            <span class="digit six">6</span>
                        </span>
                    </div>
                    
                    <!-- Mensaje -->
                    <div class="message">
                        <div>Que la alegría sea tu 'frontend', y los buenos momentos tu 'backend'.</div>
                        <div>Por un año en que cada 'commit' de tu vida sea un paso hacia tus sueños.</div>
                    </div>
                    
                    <!-- Firma -->
                    <div class="signature">
                        Estefanía San Miguel Mas
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Partículas brillantes -->
    <div class="sparkles">
        <div class="sparkle" style="top: 10%; left: 15%;"></div>
        <div class="sparkle" style="top: 20%; left: 85%;"></div>
        <div class="sparkle" style="top: 30%; left: 10%;"></div>
        <div class="sparkle" style="top: 40%; left: 90%;"></div>
        <div class="sparkle" style="top: 60%; left: 5%;"></div>
        <div class="sparkle" style="top: 70%; left: 95%;"></div>
        <div class="sparkle" style="top: 80%; left: 12%;"></div>
        <div class="sparkle" style="top: 90%; left: 88%;"></div>
    </div>

    <!-- Efectos de deseo concedido -->
    <div class="wish-granted-effects" id="wishEffects">
        <div class="wish-sparkle"></div>
        <div class="wish-sparkle"></div>
        <div class="wish-sparkle"></div>
        <div class="wish-sparkle"></div>
        <div class="wish-sparkle"></div>
        <div class="wish-text">✨ Deseo concedido ✨</div>
    </div>

    <!-- Efectos tecnológicos adicionales -->
    <div class="tech-effects">
        <div class="hologram-grid"></div>
    </div>

    <script>
        // Variables globales
        let cardOpened = false;
        
        // Detección de dispositivos móviles y optimización agresiva
        const isMobileDevice = () => {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||
                   (navigator.maxTouchPoints && navigator.maxTouchPoints > 2 && /MacIntel/.test(navigator.platform)) ||
                   window.innerWidth <= 768;
        };

        const isLowPerformanceDevice = () => {
            const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            const slowConnection = connection && (connection.effectiveType === 'slow-2g' || connection.effectiveType === '2g' || connection.effectiveType === '3g');
            const lowMemory = navigator.deviceMemory && navigator.deviceMemory < 4;
            const oldDevice = navigator.hardwareConcurrency && navigator.hardwareConcurrency < 4;
            const smallScreen = window.innerWidth <= 480;
            
            return slowConnection || lowMemory || oldDevice || smallScreen;
        };

        // Función para abrir la carta optimizada para móviles
        function openCard() {
            if (cardOpened) return;
            
            cardOpened = true;
            const openButton = document.getElementById('openButton');
            const cardEnvelope = document.getElementById('cardEnvelope');
            
            // Ocultar botón con animación
            openButton.classList.add('button-clicked');
            
            // Tiempos optimizados para móviles
            const buttonDelay = isMobileDevice() ? 600 : 800;
            const cardDelay = isMobileDevice() ? 800 : 1000;
            
            setTimeout(() => {
                openButton.style.display = 'none';
                cardEnvelope.classList.add('card-opening');
                
                // Iniciar animaciones de la tarjeta después de la apertura
                setTimeout(() => {
                    document.body.classList.add('animations-ready');
                    startCardAnimations();
                }, cardDelay);
                
            }, buttonDelay);
        }

        // Función para iniciar las animaciones de la tarjeta
        function startCardAnimations() {
            // Activar efectos tecnológicos solo en desktop
            if (!isMobileDevice()) {
                const techEffects = document.querySelector('.tech-effects');
                if (techEffects) {
                    techEffects.classList.add('active');
                }
            }
            
            // Iniciar secuencia de animaciones del árbol
            setTimeout(() => {
                const treeContainer = document.querySelector('.tree-container');
                if (treeContainer) {
                    treeContainer.classList.add('tree-animate');
                }
            }, isMobileDevice() ? 300 : 500);
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', () => {
            try {
                const openButton = document.getElementById('openButton');
                
                if (!openButton) {
                    console.error('Botón de apertura no encontrado');
                    return;
                }
                
                // Click y touch en el botón
                openButton.addEventListener('click', openCard);
                openButton.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    openCard();
                });
                
                // Mejorar la experiencia táctil
                if (isMobileDevice()) {
                    const buttonElement = openButton.querySelector('.open-button');
                    if (buttonElement) {
                        buttonElement.style.cursor = 'pointer';
                        buttonElement.addEventListener('touchstart', () => {
                            buttonElement.style.transform = 'translate(-50%, -50%) scale(0.95)';
                        });
                        buttonElement.addEventListener('touchend', () => {
                            buttonElement.style.transform = 'translate(-50%, -50%) scale(1)';
                        });
                    }
                }
                
                // Optimización específica para móviles
                if (isMobileDevice()) {
                    // Eliminar elementos pesados inmediatamente
                    const heavyElements = document.querySelectorAll('.snow-small, .snow-tiny, .sparkles, .magic-particles, .tree-aura, .tech-effects');
                    heavyElements.forEach(el => el.remove());
                    
                    // Reducir calidad de efectos
                    document.body.classList.add('mobile-optimized');
                    
                    // Reducir número de luces de circuito en móviles
                    const circuitLights = document.querySelectorAll('.circuit-light');
                    circuitLights.forEach((light, index) => {
                        if (index % 2 === 0) {
                            light.remove();
                        }
                    });
                    
                    // Simplificar backdrop-filter para mejor rendimiento
                    const openButtonEl = document.querySelector('.open-button');
                    if (openButtonEl) {
                        openButtonEl.style.backdropFilter = 'blur(10px)';
                    }
                }

                // Aplicar modo reducido si es necesario
                if (isLowPerformanceDevice()) {
                    document.body.classList.add('reduced-motion');
                    
                    // Eliminar más elementos en dispositivos muy lentos
                    const moreElements = document.querySelectorAll('.snow-medium, .tech-effects, .button-glow, .button-particles');
                    moreElements.forEach(el => el.remove());
                    
                    // Simplificar animaciones
                    const style = document.createElement('style');
                    style.textContent = `
                        * {
                            animation-duration: 0.5s !important;
                            transition-duration: 0.3s !important;
                        }
                    `;
                    document.head.appendChild(style);
                }
            } catch (error) {
                console.error('Error inicializando la aplicación:', error);
            }
        });

        // Funcionalidad de click en la estrella tecnológica
        document.addEventListener('click', (e) => {
            if (e.target.closest('.christmas-star') || e.target.closest('.interactive-star')) {
                e.preventDefault();
                
                const wishEffects = document.getElementById('wishEffects');
                const star = e.target.closest('.christmas-star') || e.target.closest('.interactive-star');
                
                // Activar efectos de deseo concedido
                if (wishEffects && star) {
                    wishEffects.classList.add('active');
                    star.classList.add('wish-activated');
                    
                    if (!isMobileDevice()) {
                        createWishParticles();
                    }
                    
                    // Resetear después de la animación
                    setTimeout(() => {
                        wishEffects.classList.remove('active');
                        star.classList.remove('wish-activated');
                    }, isMobileDevice() ? 1500 : 3000);
                }
            }
        });

        // Crear partículas de deseo (solo en desktop)
        function createWishParticles() {
            if (isMobileDevice()) return;
            
            const container = document.querySelector('.tree-container');
            if (!container) return;
            
            for (let i = 0; i < 8; i++) {
                const particle = document.createElement('div');
                particle.className = 'wish-particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 0.5 + 's';
                
                container.appendChild(particle);
                
                // Remover después de la animación
                setTimeout(() => {
                    particle.remove();
                }, 2000);
            }
        }

        // Optimización para orientación landscape en móviles
        const handleOrientationChange = () => {
            const isLandscape = window.innerHeight < window.innerWidth;
            const isMobile = window.innerWidth <= 768;
            
            if (isMobile && isLandscape) {
                document.body.classList.add('mobile-landscape');
            } else {
                document.body.classList.remove('mobile-landscape');
            }
        };

        window.addEventListener('orientationchange', handleOrientationChange);
        window.addEventListener('resize', handleOrientationChange);
        handleOrientationChange();

        // Optimización de rendimiento - pausar animaciones cuando no está visible
        let isVisible = true;
        document.addEventListener('visibilitychange', () => {
            isVisible = !document.hidden;
            document.body.classList.toggle('paused', !isVisible);
        });

        // Optimización adicional: reducir frame rate en móviles
        if (isMobileDevice()) {
            const style = document.createElement('style');
            style.textContent = `
                * {
                    animation-timing-function: ease !important;
                }
                .light {
                    animation-duration: 6s !important;
                }
                .snow-large, .snow-medium {
                    animation-duration: 40s, 35s !important;
                }
            `;
            document.head.appendChild(style);
        }
    </script>
</body>
</html>